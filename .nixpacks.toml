[build]
  # Explicitly specify Python as the buildpack
  buildpack = "nixpacks/buildpacks/python"

[phases.setup]
  nixPkgs = ["python3", "python3Packages.pip", "gcc", "g++", "stdenv"]
  cmds = [
    "python3 -m pip install --upgrade pip",
    "python3 -m pip install -r requirements.txt"
  ]

[phases.build]
  cmds = [
    "cd backend && python3 create_tables.py"
  ]

[start]
  cmd = "cd backend && python3 -m uvicorn src.api.main:app --host 0.0.0.0 --port $PORT"